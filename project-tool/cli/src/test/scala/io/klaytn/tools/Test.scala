package io.klaytn.tools

import org.scalatest.funsuite.AnyFunSuite
import com.klaytn.caver.Caver
import org.scalatest.funsuite.AnyFunSuite
import io.klaytn.contract.lib.ERC20MetadataReader
import io.klaytn.contract.lib.ContractChecker

class Test extends AnyFunSuite {
  test("1") {
    val contractAddress =
      Seq("0xb81f01dc76ef6bad15cbec8ac66eb4300f4565bc")

    val caver = new Caver("https://api.baobab.klaytn.net:8651")

    val checker = new ContractChecker(caver)
    val byteCode =
      "0x60806040523480156200001157600080fd5b5060405162001a8238038062001a8283398181016040528101906200003791906200023b565b818181600390816200004a91906200050b565b5080600490816200005c91906200050b565b50505033600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050620005f2565b6000604051905090565b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6200011182620000c6565b810181811067ffffffffffffffff82111715620001335762000132620000d7565b5b80604052505050565b600062000148620000a8565b905062000156828262000106565b919050565b600067ffffffffffffffff821115620001795762000178620000d7565b5b6200018482620000c6565b9050602081019050919050565b60005b83811015620001b157808201518184015260208101905062000194565b60008484015250505050565b6000620001d4620001ce846200015b565b6200013c565b905082815260208101848484011115620001f357620001f2620000c1565b5b6200020084828562000191565b509392505050565b600082601f83011262000220576200021f620000bc565b5b815162000232848260208601620001bd565b91505092915050565b60008060408385031215620002555762000254620000b2565b5b600083015167ffffffffffffffff811115620002765762000275620000b7565b5b620002848582860162000208565b925050602083015167ffffffffffffffff811115620002a857620002a7620000b7565b5b620002b68582860162000208565b9150509250929050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200031357607f821691505b602082108103620003295762000328620002cb565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620003937fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8262000354565b6200039f868362000354565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b6000620003ec620003e6620003e084620003b7565b620003c1565b620003b7565b9050919050565b6000819050919050565b6200040883620003cb565b620004206200041782620003f3565b84845462000361565b825550505050565b600090565b6200043762000428565b62000444818484620003fd565b505050565b5b818110156200046c57620004606000826200042d565b6001810190506200044a565b5050565b601f821115620004bb5762000485816200032f565b620004908462000344565b81016020851015620004a0578190505b620004b8620004af8562000344565b83018262000449565b50505b505050565b600082821c905092915050565b6000620004e060001984600802620004c0565b1980831691505092915050565b6000620004fb8383620004cd565b9150826002028217905092915050565b6200051682620002c0565b67ffffffffffffffff811115620005325762000531620000d7565b5b6200053e8254620002fa565b6200054b82828562000470565b600060209050601f8311600181146200058357600084156200056e578287015190505b6200057a8582620004ed565b865550620005ea565b601f19841662000593866200032f565b60005b82811015620005bd5784890151825560018201915060208501945060208101905062000596565b86831015620005dd5784890151620005d9601f891682620004cd565b8355505b6001600288020188555050505b505050505050565b61148080620006026000396000f3fe608060405234801561001057600080fd5b50600436106100b45760003560e01c806340c10f191161007157806340c10f19146101a357806370a08231146101bf57806395d89b41146101ef578063a457c2d71461020d578063a9059cbb1461023d578063dd62ed3e1461026d576100b4565b806306fdde03146100b9578063095ea7b3146100d757806318160ddd1461010757806323b872dd14610125578063313ce567146101555780633950935114610173575b600080fd5b6100c161029d565b6040516100ce9190610cf1565b60405180910390f35b6100f160048036038101906100ec9190610dac565b61032f565b6040516100fe9190610e07565b60405180910390f35b61010f610352565b60405161011c9190610e31565b60405180910390f35b61013f600480360381019061013a9190610e4c565b61035c565b60405161014c9190610e07565b60405180910390f35b61015d61038b565b60405161016a9190610ebb565b60405180910390f35b61018d60048036038101906101889190610dac565b610394565b60405161019a9190610e07565b60405180910390f35b6101bd60048036038101906101b89190610dac565b6103cb565b005b6101d960048036038101906101d49190610ed6565b610433565b6040516101e69190610e31565b60405180910390f35b6101f761047b565b6040516102049190610cf1565b60405180910390f35b61022760048036038101906102229190610dac565b61050d565b6040516102349190610e07565b60405180910390f35b61025760048036038101906102529190610dac565b610584565b6040516102649190610e07565b60405180910390f35b61028760048036038101906102829190610f03565b6105a7565b6040516102949190610e31565b60405180910390f35b6060600380546102ac90610f72565b80601f01602080910402602001604051908101604052809291908181526020018280546102d890610f72565b80156103255780601f106102fa57610100808354040283529160200191610325565b820191906000526020600020905b81548152906001019060200180831161030857829003601f168201915b5050505050905090565b60008061033a61062e565b9050610347818585610636565b600191505092915050565b6000600254905090565b60008061036761062e565b90506103748582856107ff565b61037f85858561088b565b60019150509392505050565b60006012905090565b60008061039f61062e565b90506103c08185856103b185896105a7565b6103bb9190610fd2565b610636565b600191505092915050565b600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461042557600080fd5b61042f8282610b01565b5050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b60606004805461048a90610f72565b80601f01602080910402602001604051908101604052809291908181526020018280546104b690610f72565b80156105035780601f106104d857610100808354040283529160200191610503565b820191906000526020600020905b8154815290600101906020018083116104e657829003601f168201915b5050505050905090565b60008061051861062e565b9050600061052682866105a7565b90508381101561056b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161056290611078565b60405180910390fd5b6105788286868403610636565b60019250505092915050565b60008061058f61062e565b905061059c81858561088b565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b600033905090565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036106a5576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161069c9061110a565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610714576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161070b9061119c565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925836040516107f29190610e31565b60405180910390a3505050565b600061080b84846105a7565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146108855781811015610877576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161086e90611208565b60405180910390fd5b6108848484848403610636565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036108fa576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108f19061129a565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610969576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109609061132c565b60405180910390fd5b610974838383610c57565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050818110156109fa576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109f1906113be565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051610ae89190610e31565b60405180910390a3610afb848484610c5c565b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610b70576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b679061142a565b60405180910390fd5b610b7c60008383610c57565b8060026000828254610b8e9190610fd2565b92505081905550806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610c3f9190610e31565b60405180910390a3610c5360008383610c5c565b5050565b505050565b505050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610c9b578082015181840152602081019050610c80565b60008484015250505050565b6000601f19601f8301169050919050565b6000610cc382610c61565b610ccd8185610c6c565b9350610cdd818560208601610c7d565b610ce681610ca7565b840191505092915050565b60006020820190508181036000830152610d0b8184610cb8565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610d4382610d18565b9050919050565b610d5381610d38565b8114610d5e57600080fd5b50565b600081359050610d7081610d4a565b92915050565b6000819050919050565b610d8981610d76565b8114610d9457600080fd5b50565b600081359050610da681610d80565b92915050565b60008060408385031215610dc357610dc2610d13565b5b6000610dd185828601610d61565b9250506020610de285828601610d97565b9150509250929050565b60008115159050919050565b610e0181610dec565b82525050565b6000602082019050610e1c6000830184610df8565b92915050565b610e2b81610d76565b82525050565b6000602082019050610e466000830184610e22565b92915050565b600080600060608486031215610e6557610e64610d13565b5b6000610e7386828701610d61565b9350506020610e8486828701610d61565b9250506040610e9586828701610d97565b9150509250925092565b600060ff82169050919050565b610eb581610e9f565b82525050565b6000602082019050610ed06000830184610eac565b92915050565b600060208284031215610eec57610eeb610d13565b5b6000610efa84828501610d61565b91505092915050565b60008060408385031215610f1a57610f19610d13565b5b6000610f2885828601610d61565b9250506020610f3985828601610d61565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680610f8a57607f821691505b602082108103610f9d57610f9c610f43565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000610fdd82610d76565b9150610fe883610d76565b925082820190508082111561100057610fff610fa3565b5b92915050565b7f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f7760008201527f207a65726f000000000000000000000000000000000000000000000000000000602082015250565b6000611062602583610c6c565b915061106d82611006565b604082019050919050565b6000602082019050818103600083015261109181611055565b9050919050565b7f45524332303a20617070726f76652066726f6d20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b60006110f4602483610c6c565b91506110ff82611098565b604082019050919050565b60006020820190508181036000830152611123816110e7565b9050919050565b7f45524332303a20617070726f766520746f20746865207a65726f20616464726560008201527f7373000000000000000000000000000000000000000000000000000000000000602082015250565b6000611186602283610c6c565b91506111918261112a565b604082019050919050565b600060208201905081810360008301526111b581611179565b9050919050565b7f45524332303a20696e73756666696369656e7420616c6c6f77616e6365000000600082015250565b60006111f2601d83610c6c565b91506111fd826111bc565b602082019050919050565b60006020820190508181036000830152611221816111e5565b9050919050565b7f45524332303a207472616e736665722066726f6d20746865207a65726f20616460008201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b6000611284602583610c6c565b915061128f82611228565b604082019050919050565b600060208201905081810360008301526112b381611277565b9050919050565b7f45524332303a207472616e7366657220746f20746865207a65726f206164647260008201527f6573730000000000000000000000000000000000000000000000000000000000602082015250565b6000611316602383610c6c565b9150611321826112ba565b604082019050919050565b6000602082019050818103600083015261134581611309565b9050919050565b7f45524332303a207472616e7366657220616d6f756e742065786365656473206260008201527f616c616e63650000000000000000000000000000000000000000000000000000602082015250565b60006113a8602683610c6c565b91506113b38261134c565b604082019050919050565b600060208201905081810360008301526113d78161139b565b9050919050565b7f45524332303a206d696e7420746f20746865207a65726f206164647265737300600082015250565b6000611414601f83610c6c565b915061141f826113de565b602082019050919050565b6000602082019050818103600083015261144381611407565b905091905056fea264697066735822122034a669d108f1bac1371eb84cd567102aff5cb1e296a5dec0529e3bea924c6ec064736f6c63430008120033000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000009544553545f48544d4c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000045448544d00000000000000000000000000000000000000000000000000000000"

    val reader = new ERC20MetadataReader(caver)
    contractAddress.foreach { x =>
      val res = checker.check(x, byteCode)
      println(res)
      val result = reader.read(x)
      val balance =
        reader.balanceOf(x, "0x9eb258ce5b74bc34c9898828d4db5cf85c980f27")
      println(result)
      println(balance)
    }

  }
}
